{% extends "voter_analytics/base.html" %}

{% block title %}Graphs Â· Voter Analytics{% endblock %}

{% block content %}

<section class="panel filter-form">
  <form method="get">
    <div class="filters-inline">
      <div>
        <label for="party">Party</label>
        <select name="party" id="party">
          <option value="">(any)</option>
          {% for p in party_options %}
            <option value="{{ p }}" {% if filter_party == p %}selected{% endif %}>{{ p }}</option>
          {% endfor %}
        </select>
      </div>

      <div>
        <label for="min_dob_year">Min Birth Year (>=)</label>
        <select name="min_dob_year" id="min_dob_year">
          <option value="">(none)</option>
          {% for y in dob_year_options %}
            <option value="{{ y }}" {% if filter_min_dob_year == y|stringformat:"s" %}selected{% endif %}>{{ y }}</option>
          {% endfor %}
        </select>
      </div>

      <div>
        <label for="max_dob_year">Max Birth Year (<=)</label>
        <select name="max_dob_year" id="max_dob_year">
          <option value="">(none)</option>
          {% for y in dob_year_options %}
            <option value="{{ y }}" {% if filter_max_dob_year == y|stringformat:"s" %}selected{% endif %}>{{ y }}</option>
          {% endfor %}
        </select>
      </div>

      <div>
        <label for="voter_score">Voter Score</label>
        <select name="voter_score" id="voter_score">
          <option value="">(any)</option>
          {% for s in score_options %}
            <option value="{{ s }}" {% if filter_voter_score == s|stringformat:"s" %}selected{% endif %}>{{ s }}</option>
          {% endfor %}
        </select>
      </div>
    </div>

    <div class="filters-inline checkbox-group" style="margin-top:1rem;">
      <div>
        <label><input type="checkbox" name="v20state" value="1" {{ filter_v20state }}> Voted in 2020 State</label>
        <label><input type="checkbox" name="v21town" value="1" {{ filter_v21town }}> Voted in 2021 Town</label>
        <label><input type="checkbox" name="v21primary" value="1" {{ filter_v21primary }}> Voted in 2021 Primary</label>
        <label><input type="checkbox" name="v22general" value="1" {{ filter_v22general }}> Voted in 2022 General</label>
        <label><input type="checkbox" name="v23town" value="1" {{ filter_v23town }}> Voted in 2023 Town</label>
      </div>
    </div>

    <div class="button-row">
      <button type="submit">Apply Filters</button>
      <a class="reset-link" href="{% url 'graphs' %}">Reset</a>
    </div>
  </form>
</section>

<section class="panel">
  <div>{{ graph_births|safe }}</div>
</section>

<section class="panel">
  <div>{{ graph_party|safe }}</div>
</section>

<section class="panel">
  <div>{{ graph_elections|safe }}</div>
</section>

{% endblock %}
